# Техническое задание

## Проект: Telegram‑бот для генерации и проработки персональных мантр

### 🔧 ЦЕЛЬ
Создать Telegram‑бота, который:

- Ведёт пользователя по заданной теме (обида, зависть, гнев и т.п.) через **персональные мантры**.  
- Использует **сократический диалог** и GPT‑4 для глубинной психо‑эмоциональной проработки.  
- Построен как **пошаговая программа** на основе заранее подготовленного маршрута развития темы.  
- Сохраняет мантры, позволяет **прослушивать, записывать** или **заказывать начитку**.  
- Включает платёжную систему с **разовыми покупками** и **подпиской**.  
- Предусматривает развитие в сторону **автоматизации маркетплейса дикторов** и **многошаговой генерации мантр**.

---

## 🧱 MVP — СТРУКТУРА И ФУНКЦИОНАЛЬНЫЕ МОДУЛИ

### 1. Старт и главное меню
Команды:

- `/start`
- **▶️ Начать работу**

  Добро пожаловать на путь внутренней работы.  
  Выбери, с какой сферы хочешь начать:

  - **Эмоции**  
    Тревога  
    Гнев, раздражение, обида, агрессия, ненависть  
    Грусть, уныние, депрессия  
    Одиночество
  - **Самооценка**
  - **Поведение**
  - **Отношения**
  - **Смысл и мотивация**
  - **Задать свою тему**

- **ℹ️ Что это за бот**
- **⚙️ Настройки**

  В настройках:

  - 💳 Оплатить подписку / Пополнить счёт
  - 🧾 Посмотреть тарифы
  - 📃 Правила и политика

---

### 2. Темы и мантры
Пользователь может:

- Создавать **новую тему**;
- Просматривать **существующие темы**;
- **Продолжать** тему (следующая мантра);
- Посмотреть **маршрут развития** темы.

Структура темы:

```
📁 Тема: «Обида»
   🧘 Мантра 1 — Вводная
   🧘 Мантра 2 — Обиды на близких
   🧘 Мантра 3 — Обиды на себя
   ➕ Продолжить тему
   📈 Посмотреть маршрут
```

---

### 3. Диалог и генерация мантры
1. Бот задаёт **5–7 вопросов** по методу Сократа.  
2. Ответы сохраняются.  
3. Используется **единый сложный prompt**, включающий:
   - методику генерации;
   - КПТ, трёхактную структуру;
   - позитивную переформулировку установки.

---

### 4. Аудио‑функции
Пользователь может:

- **Записать** мантру голосом → сохранить / прослушать / перезаписать.
- **Заказать начитку** у диктора:
  - Выбрать из списка (имя, демо, описание, стоимость).
  - Оплатить через Telegram Payments.
  - Получить готовое аудио (на первом этапе — вручную, загружается админом).

> Система удерживает **20 % комиссии** (пока фиксируется вручную).

---

### 5. Продолжение / развитие темы (ключевая логика)
После первой мантры бот через **сутки** пишет:

> «Удалось ли послушать мантру? Хотите продолжить?»

Пользователь может выбрать:

- ✅ Продолжить по маршруту
- 🔄 Пропустить шаг
- ❓ Посмотреть маршрут и задать вопрос

**Маршрут (пример «Обида»):**

1. Обиды на случайных людей  
2. Обиды на знакомых  
3. Обиды на семью  
4. Обида на себя  
5. Прощение и интеграция  

---

### 6. Монетизация
- **Первая мантра** — бесплатно.  
- Далее выбор тарифов:

| Тариф | Цена |
|-------|------|
| 💵 1 мантра | **100 ₽** |
| 💵 5 мантр | **400 ₽** |
| 🌿 Подписка на месяц | **1 000 ₽** |
| 🌳 Годовая подписка | **9 000 ₽** |

> Лимит генерации контролируется по подписке/балансу через Telegram Payments.

---

### 7. Напоминания
Через **24 часа** бот присылает:

- «Удалось ли послушать?»
- «Хотите что‑то изменить?»
- «Продолжим проработку темы?»

---

## 🧱 Структура кабинета (логика и интерфейс)

**Главное меню:**

- 📂 Мои темы
- ➕ Новая тема
- 💳 Подписка / Оплата
- ⚙️ Настройки
- ℹ️ Помощь

**Внутри темы:**

- 🧘 Мантра 1  
- 🧘 Мантра 2  
- ➕ Создать мантру  

**Внутри мантры:**

- 📄 Текст  
- 🎧 Моя запись  
- 🔁 Перезаписать  
- ✏️ Доработать  
- 📢 Заказать начитку  
- 🗑 Удалить  

---

## Схема логики Telegram‑бота

```
📍 Старт
│
├── 👋 Приветствие
│   ├── ▶️ Начать работу
│   ├── ℹ️ Что это за бот?
│   └── ⚙️ Настройки
│       ├── 💳 Оплатить подписку / Пополнить баланс
│       ├── 🧾 Посмотреть тарифы
│       └── 📃 Правила / Политика
│
└── ▶️ Начать работу
    │
    ├── 📂 Мои темы
    │   ├── 📁 Тема 1 (Обида)
    │   │   ├── 🧘 Мантра 1
    │   │   │   ├── 📄 Посмотреть текст
    │   │   │   ├── ✏️ Доработать с ИИ
    │   │   │   ├── 🎧 Прослушать аудио (если есть)
    │   │   │   ├── 🎙 Создать аудио — Записать или Заказать
    │   │   │   │   ├── Самостоятельно → 🔊 Голосовое сообщение → 🎧 Прослушать / 🔁 / ✅
    │   │   │   │   └── Выбрать диктора → 📚 Список → ✅ Заказать → ⏳ Ожидание файла
    │   │   │   └── 🗑 Удалить (если есть)
    │   │   ├── ➕ Продолжить тему (следующая мантра)
    │   │   │   ├── 📈 Посмотреть маршрут
    │   │   │   │   ├── Шаги маршрута (напр. 5 этапов)
    │   │   │   │   ├── 🔘 Где сейчас пользователь
    │   │   │   │   ├── ➡️ Перейти к следующему шагу
    │   │   │   │   ├── 🔄 Пропустить шаг
    │   │   │   │   └── ❓ Задать вопрос по маршруту
    │   └── 📁 Тема 2 (Зависть)
    │       └── …
    │
    ├── ➕ Новая тема … (см. выше)
    │
    ├── 💳 Попытка создать вторую мантру (если лимит бесплатных исчерпан)
    │   └── Окно выбора тарифа
    │
    └── 🔁 Напоминания (через сутки)
        ├── ✅ Слушал
        ├── ❌ Не слушал
        ├── ✏️ Хочу изменить мантру
        └── ➕ Продолжить тему
```

---

### 🔧 Что эта схема даёт
- Пользователь **всегда понимает** на каком он шаге и куда может двигаться.  
- Возможность **углублять тему** через маршрут, а не просто добавлять новые мантры.  
- **Элементы доверия** через открытость методологии (❓).  
- Платёжная логика встроена естественно, **ненавязчиво**.

---

## 📊 Этапы реализации (этап 1)

| № | Этап | Описание | Срок |
|---|------|----------|------|
| 1 | Базовая настройка | Бот, БД, Webhook, команды | 2 дня |
| 2 | Диалог и генерация мантры | Сократика, API GPT‑4, prompt | 3 дня |
| 3 | Кабинет пользователя | Темы, мантры, навигация | 3 дня |
| 4 | Голосовые функции | Запись и прослушка | 2 дня |
| 5 | Платежи | Telegram Payments, лимиты | 3 дня |
| 6 | Заказ диктора | Список, заказ, ручная логика | 2 дня |
| 7 | Напоминания | Follow‑up, доработка | 1 день |
| 8 | Финальные тесты | Отладка, баг‑фиксы | 2 дня |

**Итого:** ~18 рабочих дней

---

## 💰 Оплата
Гонорар: **50 000 – 100 000 ₽**

Условия:

- Оплата после запуска и получения первой выручки.  
- Возможность перехода в **постоянную техническую роль**.  
- **Совместное право на код** в рамках проекта.  

---

## 📈 Этап 2: развитие (следующий цикл)

1. **Многошаговая генерация мантры**  
   3 внутренних этапа общения с GPT: черновик → анализ → доработка.  
   - Prompt'ы готовятся основателем проекта, передаются в конфиг.  
   - Каждая генерация: *draft → review → final*.  
   - Более гибкий и безопасный результат.

2. **Автоматизированный маркетплейс дикторов**  
   - `/register_as_dictor`  
   - Диктор загружает демо, описание, цену.  
   - Пользователь оплачивает → бот уведомляет диктора.  
   - Диктор загружает файл → бот отправляет пользователю.  
   - Оплата делится **автоматически 80 / 20**.  

3. **Трекинг прогресса и достижений (gamification)**  
   - Статусы тем (завершено / в процессе).  
   - Пройденные этапы по маршруту.  
   - Значки / достижения.  

> 🧩 Эти функции реализуются **после тестирования** MVP.

---

## 📦 Вывод
Проект — это не просто Telegram‑бот, а **программа глубокой персональной работы**, опирающаяся на ИИ, коучинг, психологию и профессиональную этику.

- **MVP** реализуем за *≈3 недели*, чтобы протестировать идею, собрать пользователей и получить первые платежи.  
- **Второй этап** добавит масштабируемость и глубину (ИИ + дикторы).  
- **Архитектура** строится **гибко**, с учётом будущих доработок.
